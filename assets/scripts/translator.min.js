String.prototype.xsplit=function(t){if(3==="a~b".split(/(~)/).length)return this.split(t);t.global||(t=new RegExp(t.source,"g"+(t.ignoreCase?"i":"")));for(var r,a=0,n=[];null!==(r=t.exec(this));)n.push(this.slice(a,r.index)),r.length>1&&n.push(r[1]),a=t.lastIndex;return a<this.length&&n.push(this.slice(a)),a===this.length&&n.push(""),n};var wpm_translator={string_to_ml_array:function(t){if("[object String]"!==Object.prototype.toString.call(t))return t;var r=t.xsplit(/(\[:[a-z-]+\]|\[:\])/gi);if("object"!=typeof r||!Object.keys(r).length)return t;if(1===Object.keys(r).length)return r[0];var a={};wpm_translator_params.languages.forEach(function(t){a[t]=""});var n=1===r.length?wpm_translator_params.default_language:"";return r.forEach(function(t,r){r%2==1?n=t.replace(/\[|\]|:/g,""):n in a&&(a[n]+=t.trim())}),a},translate_string:function(t,r){var a=wpm_translator.string_to_ml_array(t);if("object"!=typeof a||!Object.keys(a).length)return t;var n=wpm_translator_params.languages;return r?n[r]?a[r]:"":a[r=wpm_translator_params.language].length||"yes"!==wpm_translator_params.show_untranslated_strings?a[r]?a[r]:"":a[wpm_translator_params.default_language]}};
